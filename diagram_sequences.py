
+---------+          +-----------------+          +-------------------------+          +---------------------+
| КЛИЕНТ  |          |   ВЕБ-СЕРВЕР    |          |   СЕРВЕР ПРИЛОЖЕНИЙ     |          |   БАЗА ДАННЫХ       |
+---------+          +-----------------+          +-------------------------+          +---------------------+
      |                        |                               |                               |
      |  HTTP POST запрос      |                               |                               |
      |----------------------->|                               |                               |
      |                        |                               |                               |
      |                        |   Проверка HTTP POST запроса  |                               |
      |                        |------------------------------>|                               |
      |                        |                               |                               |
      |                        |                               |    Проверка Исключение #1     |
      |                        |                               |------------------------------>|
      |                        |                               |                               |
      |                        |                               |    Проверка Исключение #2     |
      |                        |                               |------------------------------>|
      |                        |                               |                               |
      |                        |                               |       Обработка запроса       |
      |                        |                               |------------------------------>|
      |                        |                               |                               |
      |                        |                               |       Сохранение данных       |
      |                        |                               |------------------------------>|
      |                        |                               |                               |
      |                        |    Получение подтверждения    |                               |
      |                        |<------------------------------|                               |
      |                        |                               |                               |
      |                        |   Отправка подтверждения      |                               |
      |                        |------------------------------>|                               |
      |                        |                               |                               |
      |                        |                               |                               |
      |                        |                               |                               |


+-----------------------+           +-------------------------+           +---------------------+
|     СЕРВЕР ПРИЛОЖЕНИЙ |           |   ВЕБ-СЕРВЕР            |           |      КЛИЕНТ         |
+-----------------------+           +-------------------------+           +---------------------+
      |                                 |                                |
      |    Исключение #1: Лог           |                                |
      |<--------------------------------|                                |
      |                                 |                                |
      |    Ошибка: Число уже поступало  |                                |
      |<--------------------------------|                                |
      |                                 |                                |
      |    Отправка ошибки клиенту      |                                |
      |-------------------------------->|                                |
      |                                 |                                |


+-----------------------+           +-------------------------+           +---------------------+
|     СЕРВЕР ПРИЛОЖЕНИЙ |           |   ВЕБ-СЕРВЕР            |           |      КЛИЕНТ         |
+-----------------------+           +-------------------------+           +---------------------+
      |                                 |                                |
      |    Исключение #2: Лог           |                                |
      |<--------------------------------|                                |
      |                                 |                                |
      |    Ошибка: Некорректное число   |                                |
      |<--------------------------------|                                |
      |                                 |                                |
      |    Отправка ошибки клиенту      |                                |
      |-------------------------------->|                                |
      |                                 |                                |
"""
Диаграмма последовательностей (Sequence Diagram):

Обработка HTTP POST запроса:
Клиент отправляет HTTP POST запрос с натуральным числом.
Веб-сервер получает запрос и передает его на обработку серверу приложений.
Сервер приложений обрабатывает запрос, проверяет исключительную ситуацию #1 и #2, и, если все в порядке, передает запрос на обработку в Базу данных.
База данных сохраняет данные и возвращает подтверждение обработки запроса.
Сервер приложений возвращает подтверждение обработки запроса веб-серверу.
Веб-сервер отправляет ответ клиенту.

Исключительная ситуация #1 (Число уже поступало):
Сервер приложений обнаруживает, что число уже поступало.
Сервер приложений создает лог с информацией об ошибке.
Сервер приложений возвращает ошибку веб-серверу.
Веб-сервер отправляет ошибку клиенту.

Исключительная ситуация #2 (Число на единицу меньше обработанного):
Сервер приложений обнаруживает, что поступившее число на единицу меньше уже обработанного числа.
Сервер приложений создает лог с информацией об ошибке.
Сервер приложений возвращает ошибку веб-серверу.
Веб-сервер отправляет ошибку клиенту.
"""